<script>

function login() {
    FB.login(function(response) {
        if (response.authResponse) {

            // connected
            console.log("FB.login connected");
            window.location.reload();

        } else {

            // cancelled
            console.log("FB.login cancelled");
        }
    },
    fbscope);
}

window.fbAsyncInit = function() {
    FB.init({
        appId: '1687233988161207',

        // App ID
        channelUrl: '//staging.pdfmyurl.com/facebook.channel.html',

        // Channel File
        status: true,

        // check login status
        cookie: true,

        // enable cookies to allow the server to access the session
        xfbml: true // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {

            // connected
            console.log("FB.getLoginStatus connected");
            sendUserInfo();

        } else if (response.status === 'not_authorized') {

            // not_authorized
            // User logged into FB but not authorized
            console.log("FB.getLoginStatus not_authorized");

        } else {

            // not_logged_in
            // User not logged into FB
            console.log("FB.getLoginStatus not_logged_in");
        }
    });
};

function sendUserInfo() {
    FB.api('/me', function(response) {

        //console.log("my object: %o", response);
        var map = new OTMap();

        //map.put("username!", response.username);
        map.put("gender!", response.gender);

        OTLogService.sendEvent("user logged in", map);
    });
}
<script>